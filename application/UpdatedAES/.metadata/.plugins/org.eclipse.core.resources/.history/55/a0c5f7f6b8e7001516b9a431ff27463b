<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
    
<%@ page import="java.sql.*" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<link rel="stylesheet" href="bootstrap/bootstrap.min.css">
	<script type="text/javascript" src="bootstrap/js/bootstrap.min.js"></script>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
	
<title>AES - Index</title>
</head>
<body>

<%
	Class.forName("org.sqlite.JDBC");
	Connection conn = DriverManager.getConnection("jdbc:sqlite:D:/Eclipse/db/aes.db");
	Statement stat = conn.createStatement();
%>
<div class="page-header" style="padding-left: 5%;">
	<h1>Region: NCR</h1>
</div>

<div class="col-md-6" style="padding-left: 5%;">
	<table class="table table-striped">
    	<thead>
              <tr>
                <th>Candidacy</th>
                <th>Candidate</th>
                <th>Votes</th>
              </tr>
		</thead>
		<tbody>     
			<%
			ResultSet totalduterte = stat.executeQuery("SELECT SUM(vote) as 'TOTALVOTES' FROM tapat WHERE name='Rodrigo Duterte';");
			String dutertetotal = totalduterte.getString("TOTALVOTES");
			totalduterte.close();
			
			ResultSet regionNCRduterte = stat.executeQuery("SELECT distinct candidacy,name FROM tapat WHERE region='NCR' and name='Rodrigo Duterte';");
			while (regionNCRduterte.next()) {	    
			    %>
			    	<tr>
			    		<td><%= regionNCRduterte.getString("candidacy") %></td>
			    		<td><%= regionNCRduterte.getString("name") %></td>
			    		<td><%= dutertetotal %></td>
			    	</tr>
			    <%
			}
			regionNCRduterte.close();	%>
			
			<%
			ResultSet totalbinay = stat.executeQuery("SELECT SUM(vote) as 'TOTALVOTES' FROM tapat WHERE name='Jejomar Binay';");
			String binaytotal = totalduterte.getString("TOTALVOTES");
			totalbinay.close();
			
			ResultSet regionNCRbinay = stat.executeQuery("SELECT distinct candidacy,name FROM tapat WHERE region='NCR' and name='Jejomar Binay';");
			while (regionNCRbinay.next()) {	    
			    %>
			    	<tr>
			    		<td><%= regionNCRbinay.getString("candidacy") %></td>
			    		<td><%= regionNCRbinay.getString("name") %></td>
			    		<td><%= binaytotal %></td>
			    	</tr>
			    <%
			}
			regionNCRbinay.close();	%>
			
			<%
			ResultSet totalsantiago = stat.executeQuery("SELECT SUM(vote) as 'TOTALVOTES' FROM tapat WHERE name='Miriam Santiago';");
			String santiagototal = totalduterte.getString("TOTALVOTES");
			totalsantiago.close();
			
			ResultSet regionNCRsantiago = stat.executeQuery("SELECT distinct candidacy,name FROM tapat WHERE region='NCR' and name='Miriam Santiago';");
			while (regionNCRsantiago.next()) {	    
			    %>
			    	<tr>
			    		<td><%= regionNCRsantiago.getString("candidacy") %></td>
			    		<td><%= regionNCRsantiago.getString("name") %></td>
			    		<td><%= santiagototal %></td>
			    	</tr>
			    <%
			}
			regionNCRsantiago.close();	%>
			
			<%
			ResultSet totalpoe = stat.executeQuery("SELECT SUM(vote) as 'TOTALVOTES' FROM tapat WHERE name='Grace Poe';");
			String poetotal = totalduterte.getString("TOTALVOTES");
			totalpoe.close();
			
			ResultSet regionNCRpoe = stat.executeQuery("SELECT distinct candidacy,name FROM tapat WHERE region='NCR' and name='Grace Poe';");
			while (regionNCRpoe.next()) {	    
			    %>
			    	<tr>
			    		<td><%= regionNCRpoe.getString("candidacy") %></td>
			    		<td><%= regionNCRpoe.getString("name") %></td>
			    		<td><%= poetotal %></td>
			    	</tr>
			    <%
			}
			regionNCRpoe.close();	%>
			
			<%
			ResultSet totalroxas = stat.executeQuery("SELECT SUM(vote) as 'TOTALVOTES' FROM tapat WHERE name='Mar Roxas';");
			String roxastotal = totalduterte.getString("TOTALVOTES");
			totalroxas.close();
			
			ResultSet regionNCRroxas = stat.executeQuery("SELECT distinct candidacy,name FROM tapat WHERE region='NCR' and name='Mar Roxas';");
			while (regionNCRroxas.next()) {	    
			    %>
			    	<tr>
			    		<td><%= regionNCRroxas.getString("candidacy") %></td>
			    		<td><%= regionNCRroxas.getString("name") %></td>
			    		<td><%= roxastotal %></td>
			    	</tr>
			    <%
			}
			regionNCRroxas.close();	%>
			
			<%
			ResultSet totalhonasan = stat.executeQuery("SELECT SUM(vote) as 'TOTALVOTES' FROM tapat WHERE name='Gringo Honasan';");
			String honasantotal = totalduterte.getString("TOTALVOTES");
			totalhonasan.close();
			
			ResultSet regionNCRhonasan = stat.executeQuery("SELECT distinct candidacy,name FROM tapat WHERE region='NCR' and name='Gringo Honasan';");
			while (regionNCRhonasan.next()) {	    
			    %>
			    	<tr>
			    		<td><%= regionNCRhonasan.getString("candidacy") %></td>
			    		<td><%= regionNCRhonasan.getString("name") %></td>
			    		<td><%= honasantotal %></td>
			    	</tr>
			    <%
			}
			regionNCRhonasan.close();	%>
    	</tbody>
	</table>
</div>

</body>
</html>